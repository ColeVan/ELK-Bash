![image](https://github.com/user-attachments/assets/8e753cf4-0682-44fa-8958-af8013fad562)


# ELK-Bash

A set of Bash scripts that automate installation and configuration of the Elastic Stack (Elasticsearch, Logstash, Kibana) and Fleet/Elastic Agent on Ubuntu.

## Scripts

- `deploy_ELK_STACK.sh` – interactive all-in-one deployment. Cleans any existing install, installs prerequisites, sets up Elasticsearch/Kibana/Logstash, configures SSL, resets built-in passwords, and can generate enrollment tokens when used as the first node of a cluster.
- `deploy_elasticsearch_node.sh` – join a new node to an existing cluster using an enrollment token generated by `deploy_ELK_STACK.sh`.
- `orchestrate.sh` – wrapper that sources `functions.sh` and sequentially runs
  `foundation.sh`, `service_install_setup.sh` and `agent_install_fleet_setup.sh`
  for a streamlined deployment.
- `foundation.sh` – gathers initial information (deployment type, IP addresses, version, credentials) and performs system cleanup.
- `service_install_setup.sh` – installs Elasticsearch, Kibana and Logstash at the version provided by `foundation.sh` and creates SSL certificates and basic configurations.
- `agent_install_fleet_setup.sh` – installs Elastic Agent as a Fleet Server and creates default policies for Windows endpoints. Adds a secure output through Logstash and enables services.
- `functions.sh` – helper functions shared by the other scripts (validation, spinners, colored output).

## Usage

1. Clone this repository on an Ubuntu host.
2. Run `sudo bash scripts/deploy_ELK_STACK.sh` for a guided installation of a single node or the initial cluster node. The script prompts for IP addresses, credentials and the Elastic version.
3. When adding more nodes to the cluster, run `sudo bash scripts/deploy_elasticsearch_node.sh` on each new host and provide the enrollment token generated by the first node.
4. You can run `sudo bash scripts/orchestrate.sh` to execute the foundation, service installation, and agent setup scripts automatically.

Generated enrollment tokens are stored in `enrollment_tokens.txt` and are valid for 20 minutes. Ensure required ports (9200, 5044, 5601, 8220) are reachable.

## Requirements

- Ubuntu-based system with `sudo` access.
- Internet connectivity (unless air-gapped mode is selected).
- Adequate resources (at least 4 vCPUs and 8 GB RAM recommended).

## License

This project is released under the MIT License.

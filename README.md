# ELK-Bash

A set of Bash scripts that automate installation and configuration of the Elastic Stack (Elasticsearch, Logstash, Kibana) and Fleet/Elastic Agent on Ubuntu.

## Scripts

- `deploy_ELK_STACK.sh` – interactive all-in-one deployment. Cleans any existing install, installs prerequisites, sets up Elasticsearch/Kibana/Logstash, configures SSL, resets built-in passwords, and can generate enrollment tokens when used as the first node of a cluster.
- `deploy_elasticsearch_node.sh` – join a new node to an existing cluster using an enrollment token generated by `deploy_ELK_STACK.sh`.
- `foundation.sh` – gathers initial information (deployment type, IP addresses, version, credentials) and performs system cleanup. Intended to be run before `service_install_setup.sh` and `agent_install_fleet_setup.sh` if deploying manually.
- `service_install_setup.sh` – installs Elasticsearch, Kibana and Logstash at the version provided by `foundation.sh` and creates SSL certificates and basic configurations.
- `agent_install_fleet_setup.sh` – installs Elastic Agent as a Fleet Server and creates default policies for Windows endpoints. Adds a secure output through Logstash and enables services.
- `functions.sh` – helper functions shared by the other scripts (validation, spinners, colored output).
- `orchestrate.sh` – placeholder script that sources other scripts. Additional pieces referenced by this script (`p00.sh`, `p01.sh`, `p02.sh`) are not included.

## Usage

1. Clone this repository on an Ubuntu host.
2. Run `sudo bash scripts/deploy_ELK_STACK.sh` for a guided installation of a single node or the initial cluster node. The script prompts for IP addresses, credentials and the Elastic version.
3. When adding more nodes to the cluster, run `sudo bash scripts/deploy_elasticsearch_node.sh` on each new host and provide the enrollment token generated by the first node.
4. Advanced users can run `foundation.sh`, `service_install_setup.sh` and `agent_install_fleet_setup.sh` individually for a step‑by‑step deployment.

Generated enrollment tokens are stored in `enrollment_tokens.txt` and are valid for 20 minutes. Ensure required ports (9200, 5044, 5601, 8220) are reachable.

## Requirements

- Ubuntu-based system with `sudo` access.
- Internet connectivity (unless air-gapped mode is selected).
- Adequate resources (at least 4 vCPUs and 8 GB RAM recommended).

## License

This project is released under the MIT License.
